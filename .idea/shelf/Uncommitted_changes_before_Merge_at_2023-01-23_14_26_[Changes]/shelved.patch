Index: CoHelp/Server/src/main/java/com/cohelp/server/service/impl/ActivityServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.cohelp.server.service.impl;\r\n\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\r\nimport com.cohelp.server.constant.TypeEnum;\r\nimport com.cohelp.server.model.domain.DetailResponse;\r\nimport com.cohelp.server.model.domain.IdAndType;\r\nimport com.cohelp.server.model.domain.Result;\r\nimport com.cohelp.server.model.entity.Activity;\r\nimport com.cohelp.server.model.entity.Image;\r\nimport com.cohelp.server.model.entity.User;\r\nimport com.cohelp.server.model.vo.ActivityVO;\r\nimport com.cohelp.server.service.ActivityService;\r\nimport com.cohelp.server.mapper.ActivityMapper;\r\nimport com.cohelp.server.service.ImageService;\r\nimport com.cohelp.server.service.UserService;\r\nimport com.cohelp.server.utils.FileUtils;\r\nimport com.cohelp.server.utils.ResultUtil;\r\nimport com.cohelp.server.utils.SensitiveUtils;\r\nimport com.cohelp.server.utils.UserHolder;\r\nimport com.github.houbb.sensitive.word.bs.SensitiveWordBs;\r\nimport com.google.gson.Gson;\r\nimport org.apache.commons.lang3.ObjectUtils;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.springframework.beans.BeanUtils;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\nimport javax.annotation.Resource;\r\nimport java.time.LocalDateTime;\r\nimport java.time.ZoneOffset;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport static com.cohelp.server.constant.NumberConstant.ONE_DAY_MILLI;\r\nimport static com.cohelp.server.constant.StatusCode.*;\r\nimport static com.cohelp.server.constant.TypeEnum.*;\r\n\r\n/**\r\n* @author jianping5\r\n* @description 针对表【activity(活动表)】的数据库操作Service实现\r\n* @createDate 2022-10-21 21:22:49\r\n*/\r\n@Service(\"activityService\")\r\npublic class ActivityServiceImpl extends ServiceImpl<ActivityMapper, Activity>\r\n    implements ActivityService{\r\n\r\n    @Resource\r\n    private Gson gson;\r\n\r\n    @Resource\r\n    private ImageService imageService;\r\n\r\n    @Resource\r\n    private ActivityMapper activityMapper;\r\n\r\n    @Resource\r\n    private UserService userService;\r\n\r\n    @Resource\r\n    private FileUtils fileUtils;\r\n\r\n    @Value(\"${spring.tengxun.url}\")\r\n    private String path;\r\n\r\n    @Override\r\n    public Result<Boolean> publishActivity(String activityJson, MultipartFile[] files) {\r\n        if (StringUtils.isBlank(activityJson)) {\r\n            return ResultUtil.fail(ERROR_PARAMS, \"请求参数错误\");\r\n        }\r\n        Activity activity = gson.fromJson(activityJson, Activity.class);\r\n\r\n        // 判断是否包含敏感词\r\n        String activityLabel = activity.getActivityLabel();\r\n        String activityDetail = activity.getActivityDetail();\r\n        String activityTitle = activity.getActivityTitle();\r\n        if (SensitiveUtils.contains(activityLabel, activityDetail, activityTitle)) {\r\n            return ResultUtil.fail(\"文本涉及敏感词汇\");\r\n        }\r\n\r\n        if (StringUtils.isBlank(activity.getActivityTitle())) {\r\n            return ResultUtil.fail(\"活动标题未填写\");\r\n        }\r\n        if (StringUtils.isBlank(activity.getActivityDetail())) {\r\n            return ResultUtil.fail(\"活动内容未填写\");\r\n        }\r\n        if (activity.getActivityTime() == null) {\r\n            return ResultUtil.fail(\"活动时间未填写\");\r\n        }\r\n        // 获取登录id，并设置当前用户id到activity中\r\n        User user = UserHolder.getUser();\r\n        int userId = user.getId();\r\n        activity.setActivityOwnerId(userId);\r\n        boolean save = this.save(activity);\r\n        if (!save) {\r\n            return ResultUtil.fail(ERROR_SAVE_HELP, \"活动发布失败\");\r\n        }\r\n        // 上传图片获取url\r\n        ArrayList<String> fileNameList = new ArrayList<>();\r\n        if (files != null && files.length > 0 && !\"\".equals(files[0].getOriginalFilename())) {\r\n            for (MultipartFile file : files) {\r\n                String fileName = fileUtils.fileUpload(file);\r\n                if (StringUtils.isBlank(fileName)) {\r\n                    return ResultUtil.fail(\"图片上传异常\");\r\n                }\r\n                String url = path + fileName;\r\n                fileNameList.add(fileName);\r\n                Image image = new Image();\r\n                image.setImageType(ACTIVITY.ordinal());\r\n                image.setImageSrcId(activity.getId());\r\n                image.setImageUrl(url);\r\n                boolean save1 = imageService.save(image);\r\n                if (!save1) {\r\n                    return ResultUtil.fail(ERROR_SAVE_IMAGE, \"图片保存失败\");\r\n                }\r\n            }\r\n        }\r\n\r\n        //返回互助对象及文件名称\r\n        return ResultUtil.ok(true);\r\n    }\r\n\r\n    @Override\r\n    public Result updateActivity(String activityJson, MultipartFile[] files) {\r\n        if (StringUtils.isBlank(activityJson)) {\r\n            return ResultUtil.fail(ERROR_PARAMS, \"请求参数错误\");\r\n        }\r\n        Activity activity = gson.fromJson(activityJson, Activity.class);\r\n\r\n        // 判断是否包含敏感词\r\n        String activityLabel = activity.getActivityLabel();\r\n        String activityDetail = activity.getActivityDetail();\r\n        String activityTitle = activity.getActivityTitle();\r\n        if (SensitiveUtils.contains(activityLabel, activityDetail, activityTitle)) {\r\n            return ResultUtil.fail(\"文本涉及敏感词汇\");\r\n        }\r\n\r\n        if (StringUtils.isBlank(activity.getActivityTitle())) {\r\n            return ResultUtil.fail(\"活动标题未填写\");\r\n        }\r\n        if (StringUtils.isBlank(activity.getActivityDetail())) {\r\n            return ResultUtil.fail(\"活动内容未填写\");\r\n        }\r\n        if (activity.getActivityTime() == null) {\r\n            return ResultUtil.fail(\"活动时间未填写\");\r\n        }\r\n        // 判断是否有权限（id）\r\n        User user = UserHolder.getUser();\r\n        int userId = user.getId();\r\n        if (userId != activity.getActivityOwnerId()) {\r\n            return ResultUtil.fail(\"没有权限修改\");\r\n        }\r\n        QueryWrapper<Image> queryWrapper = new QueryWrapper();\r\n        queryWrapper.eq(\"image_type\", ACTIVITY.ordinal()).eq(\"image_src_id\", activity.getId());\r\n        boolean remove = imageService.remove(queryWrapper);\r\n\r\n        // 上传图片获取url\r\n        ArrayList<String> fileNameList = new ArrayList<>();\r\n        if (files != null && files.length > 0 && !\"\".equals(files[0].getOriginalFilename())) {\r\n            for (MultipartFile file : files) {\r\n                String fileName = fileUtils.fileUpload(file);\r\n                if (StringUtils.isBlank(fileName)) {\r\n                    return ResultUtil.fail(\"图片上传异常\");\r\n                }\r\n                String url = path + fileName;\r\n                fileNameList.add(fileName);\r\n                Image image = new Image();\r\n                image.setImageType(ACTIVITY.ordinal());\r\n                image.setImageSrcId(activity.getId());\r\n                image.setImageUrl(url);\r\n                boolean save1 = imageService.save(image);\r\n                if (!save1) {\r\n                    return ResultUtil.fail(ERROR_SAVE_IMAGE, \"图片保存失败\");\r\n                }\r\n            }\r\n        }\r\n\r\n        boolean b = this.updateById(activity);\r\n        if (!b) {\r\n            return ResultUtil.fail(\"修改失败\");\r\n        }\r\n\r\n        return ResultUtil.ok(\"修改成功\");\r\n    }\r\n\r\n\r\n    @Override\r\n    public Result<List<DetailResponse>> listByCondition(Integer conditionType, Integer dayNum) {\r\n\r\n        if (conditionType == null) {\r\n            return ResultUtil.fail(ERROR_PARAMS);\r\n        }\r\n        // 创建活动视图体数组\r\n        List<DetailResponse> detailResponseList = new ArrayList<>();\r\n\r\n        // 按热度排序（并将活动信息和对应发布者部分信息注入到活动视图体中）\r\n        if (conditionType == 0) {\r\n            List<Activity> activityList = activityMapper.listByHot();\r\n            if (activityList == null) {\r\n                return ResultUtil.fail(ERROR_PARAMS, \"暂无活动\");\r\n            }\r\n            activityList.forEach(activity ->\r\n                detailResponseList.add(getDetailResponse(activity))\r\n            );\r\n        }\r\n\r\n        // 按时间排序\r\n        if (conditionType == 1) {\r\n            //  按发布时间排序\r\n            if (dayNum == null) {\r\n                QueryWrapper<Activity> activityQueryWrapper = new QueryWrapper<>();\r\n                activityQueryWrapper.orderByDesc(\"activity_create_time\");\r\n                List<Activity> activityList = activityMapper.selectList(activityQueryWrapper);\r\n                if (activityList == null) {\r\n                    return ResultUtil.fail(ERROR_PARAMS, \"暂无活动\");\r\n                }\r\n                activityList.forEach(activity ->\r\n                        detailResponseList.add(getDetailResponse(activity))\r\n                );\r\n            }\r\n            // 按活动开始时间排序（前端传入一个天数，查询活动开始时间在该天数之内的活动）\r\n            if (dayNum != null) {\r\n                QueryWrapper<Activity> activityQueryWrapper = new QueryWrapper<>();\r\n                activityQueryWrapper.orderByAsc(\"activity_time\");\r\n                List<Activity> activityList = activityMapper.selectList(activityQueryWrapper);\r\n                if (activityList == null) {\r\n                    return ResultUtil.fail(ERROR_PARAMS, \"暂无活动\");\r\n                }\r\n                activityList.forEach(activity -> {\r\n                    long timeStamp = activity.getActivityTime().toInstant(ZoneOffset.of(\"+8\")).toEpochMilli();\r\n                    long localTimeStamp = LocalDateTime.now().toInstant(ZoneOffset.of(\"+8\")).toEpochMilli();\r\n                    if (timeStamp >= localTimeStamp && timeStamp - localTimeStamp <= dayNum*ONE_DAY_MILLI){\r\n                        detailResponseList.add(getDetailResponse(activity));\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return ResultUtil.ok(detailResponseList);\r\n    }\r\n\r\n    /**\r\n     * 获取DetailResponse\r\n     * @param activity\r\n     * @return\r\n     */\r\n    public DetailResponse getDetailResponse(Activity activity) {\r\n        DetailResponse detailResponse = new DetailResponse();\r\n        // 注入 ActivityVO\r\n        ActivityVO activityVO = traverseActivity(activity);\r\n        detailResponse.setActivityVO(activityVO);\r\n\r\n        // 注入发布者图片\r\n        String publisherAvatarUrl = imageService.getById(activityVO.getAvatar()).getImageUrl();\r\n        detailResponse.setPublisherAvatarUrl(publisherAvatarUrl);\r\n\r\n        // 注入话题图片URL\r\n        IdAndType idAndType = new IdAndType();\r\n        idAndType.setType(ACTIVITY.ordinal());\r\n        idAndType.setId(activity.getId());\r\n\r\n        //获取该话题对应的的图片URL列表\r\n        ArrayList<String> imagesUrl = imageService.getImageList(idAndType);\r\n        if(ObjectUtils.anyNull(imagesUrl)){\r\n            imagesUrl = new ArrayList<>();\r\n        }\r\n        detailResponse.setImagesUrl(imagesUrl);\r\n\r\n        return detailResponse;\r\n    }\r\n\r\n    public ActivityVO traverseActivity(Activity activity) {\r\n        ActivityVO activityVO = new ActivityVO();\r\n        BeanUtils.copyProperties(activity, activityVO);\r\n        User user = userService.getById(activity.getActivityOwnerId());\r\n        activityVO.setAvatar(user.getAvatar());\r\n        activityVO.setUserName(user.getUserName());\r\n        return activityVO;\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/ActivityServiceImpl.java b/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/ActivityServiceImpl.java
--- a/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/ActivityServiceImpl.java	(revision 1c354b6f30343467bc362ae52b3a2be032a6473b)
+++ b/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/ActivityServiceImpl.java	(date 1673681540830)
@@ -18,7 +18,6 @@
 import com.cohelp.server.utils.ResultUtil;
 import com.cohelp.server.utils.SensitiveUtils;
 import com.cohelp.server.utils.UserHolder;
-import com.github.houbb.sensitive.word.bs.SensitiveWordBs;
 import com.google.gson.Gson;
 import org.apache.commons.lang3.ObjectUtils;
 import org.apache.commons.lang3.StringUtils;
Index: CoHelp/Server/src/main/java/com/cohelp/server/service/impl/RemarkLikeServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.cohelp.server.service.impl;\r\n\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.baomidou.mybatisplus.core.conditions.update.UpdateWrapper;\r\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\r\nimport com.cohelp.server.constant.TypeEnum;\r\nimport com.cohelp.server.model.domain.Result;\r\nimport com.cohelp.server.model.entity.*;\r\nimport com.cohelp.server.service.RemarkActivityService;\r\nimport com.cohelp.server.service.RemarkHelpService;\r\nimport com.cohelp.server.service.RemarkHoleService;\r\nimport com.cohelp.server.service.RemarkLikeService;\r\nimport com.cohelp.server.mapper.RemarkLikeMapper;\r\nimport com.cohelp.server.utils.ResultUtil;\r\nimport com.cohelp.server.utils.UserHolder;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.annotation.Resource;\r\n\r\nimport static com.cohelp.server.constant.StatusCode.*;\r\nimport static com.cohelp.server.constant.StatusCode.ERROR_SYSTEM;\r\n\r\n/**\r\n* @author zgy\r\n* @description 针对表【remark_like(评论点赞记录表)】的数据库操作Service实现\r\n*/\r\n@Service\r\npublic class RemarkLikeServiceImpl extends ServiceImpl<RemarkLikeMapper, RemarkLike>\r\n    implements RemarkLikeService{\r\n\r\n    @Resource\r\n    RemarkActivityService remarkActivityService;\r\n    @Resource\r\n    RemarkHelpService remarkHelpService;\r\n    @Resource\r\n    RemarkHoleService remarkHoleService;\r\n    @Resource\r\n    RemarkLikeService remarkLikeService;\r\n    @Override\r\n    public Result likeRemark(Integer type, Integer id) {\r\n        User loginUser = UserHolder.getUser();\r\n\r\n        if (TypeEnum.isActivity(type)) {\r\n            RemarkActivity remarkActivity = (RemarkActivity) getRemarkById(type, id);\r\n            // 获取当前用户对该主题的点赞记录\r\n            if (loginUser == null) {\r\n                return ResultUtil.fail(INTERCEPTOR_LOGIN, \"未登录\");\r\n            }\r\n            Integer loginUserId = loginUser.getId();\r\n            QueryWrapper<RemarkLike> likeQueryWrapper = new QueryWrapper<RemarkLike>();\r\n            likeQueryWrapper.eq(\"user_id\", loginUserId);\r\n            likeQueryWrapper.eq(\"remark_id\", remarkActivity.getId());\r\n            likeQueryWrapper.eq(\"remark_type\", TypeEnum.ACTIVITY.ordinal());\r\n            RemarkLike like = remarkLikeService.getOne(likeQueryWrapper);\r\n            // 之前未点赞且无记录\r\n            if (like == null) {\r\n                RemarkLike newLike = new RemarkLike();\r\n                newLike.setUserId(loginUserId);\r\n                newLike.setRemarkId(id);\r\n                newLike.setRemarkType(TypeEnum.ACTIVITY.ordinal());\r\n                newLike.setIsLiked(1);\r\n                boolean saveResult = remarkLikeService.save(newLike);\r\n                if (!saveResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                remarkActivity.setRemarkLike(remarkActivity.getRemarkLike() + 1);\r\n                boolean updateResult = remarkActivityService.updateById(remarkActivity);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n\r\n            // 更新条件（对应主题对应用户id）\r\n            UpdateWrapper<RemarkLike> likeUpdateWrapper = new UpdateWrapper<>();\r\n            likeUpdateWrapper.eq(\"user_id\", loginUserId);\r\n            likeUpdateWrapper.eq(\"topic_id\", remarkActivity.getId());\r\n            likeQueryWrapper.eq(\"topic_type\", TypeEnum.ACTIVITY.ordinal());\r\n\r\n            // 之前未点赞（但有记录）\r\n            if (like.getIsLiked() == 0) {\r\n                likeUpdateWrapper.set(\"is_liked\", 1);\r\n                boolean updateResult1 = remarkLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult1) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                remarkActivity.setRemarkLike(remarkActivity.getRemarkLike() + 1);\r\n                boolean updateResult = remarkActivityService.updateById(remarkActivity);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n            // 之前已点赞\r\n            if (like.getIsLiked() == 1) {\r\n                likeUpdateWrapper.set(\"is_liked\", 0);\r\n                boolean updateResult2 = remarkLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult2) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                // 减少对应主题的点赞量到\r\n                remarkActivity.setRemarkLike(remarkActivity.getRemarkLike() - 1);\r\n                boolean updateResult = remarkActivityService.updateById(remarkActivity);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"取消点赞成功\");\r\n            }\r\n        } else if (TypeEnum.isHelp(type)) {\r\n            RemarkHelp remarkHelp = (RemarkHelp) getRemarkById(type, id);\r\n            // 获取当前用户对该主题的点赞记录\r\n            if (loginUser == null) {\r\n                return ResultUtil.fail(INTERCEPTOR_LOGIN, \"未登录\");\r\n            }\r\n            Integer loginUserId = loginUser.getId();\r\n            QueryWrapper<RemarkLike> likeQueryWrapper = new QueryWrapper<RemarkLike>();\r\n            likeQueryWrapper.eq(\"user_id\", loginUserId);\r\n            likeQueryWrapper.eq(\"remark_id\", remarkHelp.getId());\r\n            likeQueryWrapper.eq(\"remark_type\", TypeEnum.HELP.ordinal());\r\n            RemarkLike like = remarkLikeService.getOne(likeQueryWrapper);\r\n            // 之前未点赞且无记录\r\n            if (like == null) {\r\n                RemarkLike newLike = new RemarkLike();\r\n                newLike.setUserId(loginUserId);\r\n                newLike.setRemarkId(id);\r\n                newLike.setRemarkType(TypeEnum.HELP.ordinal());\r\n                newLike.setIsLiked(1);\r\n                boolean saveResult = remarkLikeService.save(newLike);\r\n                if (!saveResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                remarkHelp.setRemarkLike(remarkHelp.getRemarkLike() + 1);\r\n                boolean updateResult = remarkHelpService.updateById(remarkHelp);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n\r\n            // 更新条件（对应主题对应用户id）\r\n            UpdateWrapper<RemarkLike> likeUpdateWrapper = new UpdateWrapper<>();\r\n            likeUpdateWrapper.eq(\"user_id\", loginUserId);\r\n            likeUpdateWrapper.eq(\"topic_id\", remarkHelp.getId());\r\n            likeQueryWrapper.eq(\"topic_type\", TypeEnum.HELP.ordinal());\r\n\r\n            // 之前未点赞（但有记录）\r\n            if (like.getIsLiked() == 0) {\r\n                likeUpdateWrapper.set(\"is_liked\", 1);\r\n                boolean updateResult1 = remarkLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult1) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                remarkHelp.setRemarkLike(remarkHelp.getRemarkLike() + 1);\r\n                boolean updateResult = remarkHelpService.updateById(remarkHelp);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n            // 之前已点赞\r\n            if (like.getIsLiked() == 1) {\r\n                likeUpdateWrapper.set(\"is_liked\", 0);\r\n                boolean updateResult2 = remarkLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult2) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                // 减少对应主题的点赞量到\r\n                remarkHelp.setRemarkLike(remarkHelp.getRemarkLike() - 1);\r\n                boolean updateResult = remarkHelpService.updateById(remarkHelp);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"取消点赞成功\");\r\n            }\r\n        } else {\r\n            RemarkHole remarkHole = (RemarkHole) getRemarkById(type, id);\r\n            // 获取当前用户对该主题的点赞记录\r\n            if (loginUser == null) {\r\n                return ResultUtil.fail(INTERCEPTOR_LOGIN, \"未登录\");\r\n            }\r\n            Integer loginUserId = loginUser.getId();\r\n            QueryWrapper<RemarkLike> likeQueryWrapper = new QueryWrapper<RemarkLike>();\r\n            likeQueryWrapper.eq(\"user_id\", loginUserId);\r\n            likeQueryWrapper.eq(\"remark_id\", remarkHole.getId());\r\n            likeQueryWrapper.eq(\"remark_type\", TypeEnum.HOLE.ordinal());\r\n            RemarkLike like = remarkLikeService.getOne(likeQueryWrapper);\r\n            // 之前未点赞且无记录\r\n            if (like == null) {\r\n                RemarkLike newLike = new RemarkLike();\r\n                newLike.setUserId(loginUserId);\r\n                newLike.setRemarkId(id);\r\n                newLike.setRemarkType(TypeEnum.HOLE.ordinal());\r\n                newLike.setIsLiked(1);\r\n                boolean saveResult = remarkLikeService.save(newLike);\r\n                if (!saveResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                remarkHole.setRemarkLike(remarkHole.getRemarkLike() + 1);\r\n                boolean updateResult = remarkHoleService.updateById(remarkHole);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n\r\n            // 更新条件（对应主题对应用户id）\r\n            UpdateWrapper<RemarkLike> likeUpdateWrapper = new UpdateWrapper<>();\r\n            likeUpdateWrapper.eq(\"user_id\", loginUserId);\r\n            likeUpdateWrapper.eq(\"topic_id\", remarkHole.getId());\r\n            likeQueryWrapper.eq(\"topic_type\", TypeEnum.HOLE.ordinal());\r\n\r\n            // 之前未点赞（但有记录）\r\n            if (like.getIsLiked() == 0) {\r\n                likeUpdateWrapper.set(\"is_liked\", 1);\r\n                boolean updateResult1 = remarkLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult1) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                remarkHole.setRemarkLike(remarkHole.getRemarkLike() + 1);\r\n                boolean updateResult = remarkHoleService.updateById(remarkHole);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n            // 之前已点赞\r\n            if (like.getIsLiked() == 1) {\r\n                likeUpdateWrapper.set(\"is_liked\", 0);\r\n                boolean updateResult2 = remarkLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult2) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                // 减少对应主题的点赞量到\r\n                remarkHole.setRemarkLike(remarkHole.getRemarkLike() - 1);\r\n                boolean updateResult = remarkHoleService.updateById(remarkHole);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"取消点赞成功\");\r\n            }\r\n        }\r\n        return ResultUtil.ok(false, \"操作失败\");\r\n    }\r\n    /**\r\n     * 根据id和类型获取对应评论\r\n     * @author: ZGY\r\n     * @param type 评论类型\r\n     * @param id 评论id\r\n     * @return java.lang.Object\r\n     */\r\n    private Object getRemarkById(Integer type, Integer id) {\r\n        if (type == null || type <= 0 || id == null || id <= 0) {\r\n            return ResultUtil.fail(ERROR_PARAMS);\r\n        }\r\n        Object remark;\r\n        if (TypeEnum.isActivity(type)) {\r\n            remark = remarkActivityService.getById(id);\r\n        } else if (TypeEnum.isHelp(type)) {\r\n            remark = remarkHelpService.getById(id);\r\n        } else {\r\n            remark = remarkHoleService.getById(id);\r\n        }\r\n        if (remark == null) {\r\n            return ResultUtil.fail(ERROR_PARAMS, \"评论不存在\");\r\n        }\r\n        return remark;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/RemarkLikeServiceImpl.java b/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/RemarkLikeServiceImpl.java
--- a/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/RemarkLikeServiceImpl.java	(revision 1c354b6f30343467bc362ae52b3a2be032a6473b)
+++ b/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/RemarkLikeServiceImpl.java	(date 1673875250371)
@@ -75,8 +75,8 @@
             // 更新条件（对应主题对应用户id）
             UpdateWrapper<RemarkLike> likeUpdateWrapper = new UpdateWrapper<>();
             likeUpdateWrapper.eq("user_id", loginUserId);
-            likeUpdateWrapper.eq("topic_id", remarkActivity.getId());
-            likeQueryWrapper.eq("topic_type", TypeEnum.ACTIVITY.ordinal());
+            likeUpdateWrapper.eq("remark_id", remarkActivity.getId());
+            likeUpdateWrapper.eq("remark_type", TypeEnum.ACTIVITY.ordinal());
 
             // 之前未点赞（但有记录）
             if (like.getIsLiked() == 0) {
@@ -143,8 +143,8 @@
             // 更新条件（对应主题对应用户id）
             UpdateWrapper<RemarkLike> likeUpdateWrapper = new UpdateWrapper<>();
             likeUpdateWrapper.eq("user_id", loginUserId);
-            likeUpdateWrapper.eq("topic_id", remarkHelp.getId());
-            likeQueryWrapper.eq("topic_type", TypeEnum.HELP.ordinal());
+            likeUpdateWrapper.eq("remark_id", remarkHelp.getId());
+            likeUpdateWrapper.eq("remark_type", TypeEnum.HELP.ordinal());
 
             // 之前未点赞（但有记录）
             if (like.getIsLiked() == 0) {
@@ -211,8 +211,8 @@
             // 更新条件（对应主题对应用户id）
             UpdateWrapper<RemarkLike> likeUpdateWrapper = new UpdateWrapper<>();
             likeUpdateWrapper.eq("user_id", loginUserId);
-            likeUpdateWrapper.eq("topic_id", remarkHole.getId());
-            likeQueryWrapper.eq("topic_type", TypeEnum.HOLE.ordinal());
+            likeUpdateWrapper.eq("remark_id", remarkHole.getId());
+            likeUpdateWrapper.eq("remark_type", TypeEnum.HOLE.ordinal());
 
             // 之前未点赞（但有记录）
             if (like.getIsLiked() == 0) {
Index: CoHelp/Server/src/test/java/com/cohelp/server/SensitiveWordTest.java
===================================================================
diff --git a/CoHelp/Server/src/test/java/com/cohelp/server/SensitiveWordTest.java b/CoHelp/Server/src/test/java/com/cohelp/server/SensitiveWordTest.java
deleted file mode 100644
--- a/CoHelp/Server/src/test/java/com/cohelp/server/SensitiveWordTest.java	(revision 1c354b6f30343467bc362ae52b3a2be032a6473b)
+++ /dev/null	(revision 1c354b6f30343467bc362ae52b3a2be032a6473b)
@@ -1,40 +0,0 @@
-package com.cohelp.server;
-
-import com.baomidou.mybatisplus.core.toolkit.Assert;
-import com.cohelp.server.utils.SensitiveUtils;
-import com.github.houbb.sensitive.word.bs.SensitiveWordBs;
-import org.junit.jupiter.api.Assertions;
-import org.junit.jupiter.api.Test;
-import org.springframework.boot.test.context.SpringBootTest;
-
-import java.util.List;
-
-/**
- * @author jianping5
- * @createDate 13/1/2023 下午 7:48
- */
-
-@SpringBootTest
-public class SensitiveWordTest {
-
-    @Test
-    void test1() {
-        String text = "色片";
-        // Assertions.assertTrue(SensitiveWordBs.newInstance().contains(text));
-        // 判断是否包含敏感词
-        System.out.println(SensitiveWordBs.newInstance().contains(text));
-
-        // 返回所有敏感词
-        List<String> all = SensitiveWordBs.newInstance().findAll(text);
-        System.out.println(all);
-
-        String text1 = "五星红旗迎风飘扬，毛主席的画像屹立在天安门前";
-        System.out.println(SensitiveWordBs.newInstance().contains(text1));
-
-        List<String> all1 = SensitiveWordBs.newInstance().findAll(text1);
-        System.out.println(all1);
-
-        boolean contains = SensitiveUtils.contains(text, text1);
-        System.out.println(contains);
-    }
-}
Index: .idea/libraries/Maven__org_apiguardian_apiguardian_api_1_1_2.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/libraries/Maven__org_apiguardian_apiguardian_api_1_1_2.xml b/.idea/libraries/Maven__org_apiguardian_apiguardian_api_1_0_0.xml
rename from .idea/libraries/Maven__org_apiguardian_apiguardian_api_1_1_2.xml
rename to .idea/libraries/Maven__org_apiguardian_apiguardian_api_1_0_0.xml
--- a/.idea/libraries/Maven__org_apiguardian_apiguardian_api_1_1_2.xml	(revision 1c354b6f30343467bc362ae52b3a2be032a6473b)
+++ b/.idea/libraries/Maven__org_apiguardian_apiguardian_api_1_0_0.xml	(date 1673680969701)
@@ -1,13 +1,13 @@
 <component name="libraryTable">
-  <library name="Maven: org.apiguardian:apiguardian-api:1.1.2">
+  <library name="Maven: org.apiguardian:apiguardian-api:1.0.0">
     <CLASSES>
-      <root url="jar://$PROJECT_DIR$/../../maven-repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2.jar!/" />
+      <root url="jar://$PROJECT_DIR$/../../maven-repository/org/apiguardian/apiguardian-api/1.0.0/apiguardian-api-1.0.0.jar!/" />
     </CLASSES>
     <JAVADOC>
-      <root url="jar://$PROJECT_DIR$/../../maven-repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2-javadoc.jar!/" />
+      <root url="jar://$PROJECT_DIR$/../../maven-repository/org/apiguardian/apiguardian-api/1.0.0/apiguardian-api-1.0.0-javadoc.jar!/" />
     </JAVADOC>
     <SOURCES>
-      <root url="jar://$PROJECT_DIR$/../../maven-repository/org/apiguardian/apiguardian-api/1.1.2/apiguardian-api-1.1.2-sources.jar!/" />
+      <root url="jar://$PROJECT_DIR$/../../maven-repository/org/apiguardian/apiguardian-api/1.0.0/apiguardian-api-1.0.0-sources.jar!/" />
     </SOURCES>
   </library>
 </component>
\ No newline at end of file
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AndroidLayouts\">\r\n    <shared>\r\n      <config />\r\n    </shared>\r\n  </component>\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"0ed0114c-f04d-44b0-987e-76d972b44c0b\" name=\"Changes\" comment=\"\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"HTML File\" />\r\n        <option value=\"Interface\" />\r\n        <option value=\"Enum\" />\r\n        <option value=\"Class\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <favorite-branches>\r\n      <branch-storage>\r\n        <map>\r\n          <entry type=\"LOCAL\">\r\n            <value>\r\n              <list>\r\n                <branch-info repo=\"$PROJECT_DIR$\" source=\"main\" />\r\n              </list>\r\n            </value>\r\n          </entry>\r\n        </map>\r\n      </branch-storage>\r\n    </favorite-branches>\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"zgy\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n    <option name=\"RESET_MODE\" value=\"HARD\" />\r\n  </component>\r\n  <component name=\"GitSEFilterConfiguration\">\r\n    <file-type-list>\r\n      <filtered-out-file-type name=\"LOCAL_BRANCH\" />\r\n      <filtered-out-file-type name=\"REMOTE_BRANCH\" />\r\n      <filtered-out-file-type name=\"TAG\" />\r\n      <filtered-out-file-type name=\"COMMIT_BY_MESSAGE\" />\r\n    </file-type-list>\r\n  </component>\r\n  <component name=\"MavenImportPreferences\">\r\n    <option name=\"generalSettings\">\r\n      <MavenGeneralSettings>\r\n        <option name=\"localRepository\" value=\"D:\\maven-repository\" />\r\n        <option name=\"mavenHome\" value=\"$PROJECT_DIR$/../../yingyong/maven/apache-maven-3.6.1\" />\r\n        <option name=\"userSettingsFile\" value=\"D:\\yingyong\\maven\\apache-maven-3.6.1\\conf\\settings.xml\" />\r\n      </MavenGeneralSettings>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"2FLlUkdwsHp0UAPj3k2Qh4xp0DZ\" />\r\n  <component name=\"ProjectLevelVcsManager\">\r\n    <ConfirmationsSetting value=\"2\" id=\"Add\" />\r\n  </component>\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n    <option name=\"showMembers\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"ASKED_ADD_EXTERNAL_FILES\" value=\"true\" />\r\n    <property name=\"DatabaseDriversLRU\" value=\"mysql\" />\r\n    <property name=\"DefaultHtmlFileTemplate\" value=\"HTML File\" />\r\n    <property name=\"RequestMappingsPanelOrder0\" value=\"0\" />\r\n    <property name=\"RequestMappingsPanelOrder1\" value=\"1\" />\r\n    <property name=\"RequestMappingsPanelWidth0\" value=\"75\" />\r\n    <property name=\"RequestMappingsPanelWidth1\" value=\"75\" />\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"add_unversioned_files\" value=\"$PROJECT_DIR$/CoHelp/Server/src/main/resources/application.yml\" />\r\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$/CoHelp/Server\" />\r\n    <property name=\"nodejs_package_manager_path\" value=\"npm\" />\r\n    <property name=\"project.structure.last.edited\" value=\"Modules\" />\r\n    <property name=\"project.structure.proportion\" value=\"0.1507799\" />\r\n    <property name=\"project.structure.side.proportion\" value=\"0.12378167\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"reference.settingsdialog.IDE.editor.colors.General\" />\r\n  </component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"D:\\java_workspace\\Co-Help\\CoHelp\\Server\\src\\main\\resources\" />\r\n    </key>\r\n    <key name=\"MoveClassesOrPackagesDialog.RECENTS_KEY\">\r\n      <recent name=\"com.cohelp.server\" />\r\n    </key>\r\n    <key name=\"CopyClassDialog.RECENTS_KEY\">\r\n      <recent name=\"com.cohelp.server.service.impl\" />\r\n      <recent name=\"com.cohelp.server.service\" />\r\n      <recent name=\"com.cohelp.server.model.domain\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunAnythingCache\">\r\n    <option name=\"myCommands\">\r\n      <command value=\"mvn clean\" />\r\n    </option>\r\n  </component>\r\n  <component name=\"RunManager\" selected=\"Spring Boot.ServerApplication\">\r\n    <configuration name=\"ServerApplicationTests.test\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"server\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"com.cohelp.server.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"com.cohelp.server\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"com.cohelp.server.ServerApplicationTests\" />\r\n      <option name=\"METHOD_NAME\" value=\"test\" />\r\n      <option name=\"TEST_OBJECT\" value=\"method\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"ServerApplicationTests.test08\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"server\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"com.cohelp.server.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"com.cohelp.server\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"com.cohelp.server.ServerApplicationTests\" />\r\n      <option name=\"METHOD_NAME\" value=\"test08\" />\r\n      <option name=\"TEST_OBJECT\" value=\"method\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"ServerApplicationTests.test09\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"server\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"com.cohelp.server.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"com.cohelp.server\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"com.cohelp.server.ServerApplicationTests\" />\r\n      <option name=\"METHOD_NAME\" value=\"test09\" />\r\n      <option name=\"TEST_OBJECT\" value=\"method\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"ServerApplicationTests.testSeach\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"server\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"com.cohelp.server.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"com.cohelp.server\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"com.cohelp.server.ServerApplicationTests\" />\r\n      <option name=\"METHOD_NAME\" value=\"testSeach\" />\r\n      <option name=\"TEST_OBJECT\" value=\"method\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"ServerApplicationTests.testTypeEnum\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"server\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"com.cohelp.server.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"com.cohelp.server\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"com.cohelp.server.ServerApplicationTests\" />\r\n      <option name=\"METHOD_NAME\" value=\"testTypeEnum\" />\r\n      <option name=\"TEST_OBJECT\" value=\"method\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"com.cohelp.server in server\" type=\"JUnit\" factoryName=\"JUnit\" nameIsGenerated=\"true\">\r\n      <module name=\"server\" />\r\n      <extension name=\"coverage\">\r\n        <pattern>\r\n          <option name=\"PATTERN\" value=\"com.cohelp.server.controller.*\" />\r\n          <option name=\"ENABLED\" value=\"true\" />\r\n        </pattern>\r\n      </extension>\r\n      <option name=\"PACKAGE_NAME\" value=\"com.cohelp.server\" />\r\n      <option name=\"MAIN_CLASS_NAME\" value=\"\" />\r\n      <option name=\"METHOD_NAME\" value=\"\" />\r\n      <option name=\"TEST_OBJECT\" value=\"package\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"ServerApplication\" type=\"SpringBootApplicationConfigurationType\" factoryName=\"Spring Boot\">\r\n      <module name=\"server\" />\r\n      <option name=\"SPRING_BOOT_MAIN_CLASS\" value=\"com.cohelp.server.ServerApplication\" />\r\n      <option name=\"ALTERNATIVE_JRE_PATH\" />\r\n      <option name=\"SHORTEN_COMMAND_LINE\" value=\"NONE\" />\r\n      <option name=\"UPDATE_ACTION_UPDATE_POLICY\" value=\"UpdateClassesAndResources\" />\r\n      <option name=\"FRAME_DEACTIVATION_UPDATE_POLICY\" value=\"UpdateClassesAndResources\" />\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n      </method>\r\n    </configuration>\r\n    <list>\r\n      <item itemvalue=\"JUnit.com.cohelp.server in server\" />\r\n      <item itemvalue=\"JUnit.ServerApplicationTests.test\" />\r\n      <item itemvalue=\"JUnit.ServerApplicationTests.testTypeEnum\" />\r\n      <item itemvalue=\"JUnit.ServerApplicationTests.testSeach\" />\r\n      <item itemvalue=\"JUnit.ServerApplicationTests.test08\" />\r\n      <item itemvalue=\"JUnit.ServerApplicationTests.test09\" />\r\n      <item itemvalue=\"Spring Boot.ServerApplication\" />\r\n    </list>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"JUnit.ServerApplicationTests.test09\" />\r\n        <item itemvalue=\"JUnit.ServerApplicationTests.test08\" />\r\n        <item itemvalue=\"JUnit.ServerApplicationTests.testSeach\" />\r\n        <item itemvalue=\"JUnit.ServerApplicationTests.testTypeEnum\" />\r\n        <item itemvalue=\"JUnit.ServerApplicationTests.test\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"SpringBootOptions\">\r\n    <option name=\"showAdditionalConfigNotification\" value=\"false\" />\r\n  </component>\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"0ed0114c-f04d-44b0-987e-76d972b44c0b\" name=\"Changes\" comment=\"\" />\r\n      <created>1664279264494</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1664279264494</updated>\r\n      <workItem from=\"1664279266431\" duration=\"3079000\" />\r\n      <workItem from=\"1664584422258\" duration=\"156000\" />\r\n      <workItem from=\"1665401178457\" duration=\"2213000\" />\r\n      <workItem from=\"1665403609971\" duration=\"1882000\" />\r\n      <workItem from=\"1665477377790\" duration=\"235000\" />\r\n      <workItem from=\"1665832522721\" duration=\"831000\" />\r\n      <workItem from=\"1665833431810\" duration=\"22225000\" />\r\n      <workItem from=\"1665881144830\" duration=\"18176000\" />\r\n      <workItem from=\"1665900797574\" duration=\"5775000\" />\r\n      <workItem from=\"1665907003236\" duration=\"2444000\" />\r\n      <workItem from=\"1665926598105\" duration=\"250000\" />\r\n      <workItem from=\"1665969453579\" duration=\"7600000\" />\r\n      <workItem from=\"1665991298455\" duration=\"7400000\" />\r\n      <workItem from=\"1666078896710\" duration=\"789000\" />\r\n      <workItem from=\"1666080656616\" duration=\"454000\" />\r\n      <workItem from=\"1666081127782\" duration=\"3638000\" />\r\n      <workItem from=\"1666085615759\" duration=\"1454000\" />\r\n      <workItem from=\"1666259376021\" duration=\"13790000\" />\r\n      <workItem from=\"1666283726124\" duration=\"63000\" />\r\n      <workItem from=\"1666283811491\" duration=\"40000\" />\r\n      <workItem from=\"1666288918040\" duration=\"276000\" />\r\n      <workItem from=\"1666290297495\" duration=\"5000\" />\r\n      <workItem from=\"1666291536109\" duration=\"542000\" />\r\n      <workItem from=\"1666342548974\" duration=\"7602000\" />\r\n      <workItem from=\"1666660028939\" duration=\"8267000\" />\r\n      <workItem from=\"1666668377477\" duration=\"3240000\" />\r\n      <workItem from=\"1666766825232\" duration=\"25476000\" />\r\n      <workItem from=\"1666796775010\" duration=\"3886000\" />\r\n      <workItem from=\"1666828613145\" duration=\"26845000\" />\r\n      <workItem from=\"1666877775598\" duration=\"2182000\" />\r\n      <workItem from=\"1666881356945\" duration=\"2362000\" />\r\n      <workItem from=\"1666914746166\" duration=\"543000\" />\r\n      <workItem from=\"1666918249226\" duration=\"94000\" />\r\n      <workItem from=\"1666926357798\" duration=\"2027000\" />\r\n      <workItem from=\"1666937291379\" duration=\"261000\" />\r\n      <workItem from=\"1667027155354\" duration=\"3629000\" />\r\n      <workItem from=\"1667031310938\" duration=\"210000\" />\r\n      <workItem from=\"1667031764270\" duration=\"2639000\" />\r\n      <workItem from=\"1667034977976\" duration=\"158000\" />\r\n      <workItem from=\"1667208545124\" duration=\"1803000\" />\r\n      <workItem from=\"1667214524210\" duration=\"1016000\" />\r\n      <workItem from=\"1667225612859\" duration=\"1142000\" />\r\n      <workItem from=\"1667313110994\" duration=\"702000\" />\r\n      <workItem from=\"1667316068856\" duration=\"1239000\" />\r\n      <workItem from=\"1667353922129\" duration=\"4609000\" />\r\n      <workItem from=\"1667367049489\" duration=\"24034000\" />\r\n      <workItem from=\"1667401013817\" duration=\"5328000\" />\r\n      <workItem from=\"1667449049070\" duration=\"38152000\" />\r\n      <workItem from=\"1667524940276\" duration=\"7281000\" />\r\n      <workItem from=\"1667539953928\" duration=\"9261000\" />\r\n      <workItem from=\"1667552237571\" duration=\"4962000\" />\r\n      <workItem from=\"1667557348262\" duration=\"1593000\" />\r\n      <workItem from=\"1667576942960\" duration=\"214000\" />\r\n      <workItem from=\"1667634773410\" duration=\"276000\" />\r\n      <workItem from=\"1667640693103\" duration=\"852000\" />\r\n      <workItem from=\"1667651076811\" duration=\"1303000\" />\r\n      <workItem from=\"1667655057127\" duration=\"684000\" />\r\n      <workItem from=\"1667707561930\" duration=\"5623000\" />\r\n      <workItem from=\"1667730126712\" duration=\"12358000\" />\r\n      <workItem from=\"1667782066761\" duration=\"67000\" />\r\n      <workItem from=\"1667796393138\" duration=\"677000\" />\r\n      <workItem from=\"1667810193130\" duration=\"688000\" />\r\n      <workItem from=\"1667961555519\" duration=\"5976000\" />\r\n      <workItem from=\"1668175543635\" duration=\"679000\" />\r\n      <workItem from=\"1668595944478\" duration=\"4242000\" />\r\n      <workItem from=\"1668604393742\" duration=\"1784000\" />\r\n      <workItem from=\"1668610819152\" duration=\"3581000\" />\r\n      <workItem from=\"1668653028391\" duration=\"263000\" />\r\n      <workItem from=\"1668670673002\" duration=\"613000\" />\r\n      <workItem from=\"1668845438684\" duration=\"77000\" />\r\n      <workItem from=\"1668845520997\" duration=\"187000\" />\r\n      <workItem from=\"1668845724123\" duration=\"20000\" />\r\n      <workItem from=\"1668845755910\" duration=\"55000\" />\r\n      <workItem from=\"1668846168368\" duration=\"882000\" />\r\n      <workItem from=\"1669172510384\" duration=\"1044000\" />\r\n      <workItem from=\"1669698733152\" duration=\"74000\" />\r\n      <workItem from=\"1670142554721\" duration=\"47000\" />\r\n      <workItem from=\"1670204787797\" duration=\"42000\" />\r\n      <workItem from=\"1670483060652\" duration=\"111000\" />\r\n      <workItem from=\"1670485516403\" duration=\"85000\" />\r\n      <workItem from=\"1670732094705\" duration=\"609000\" />\r\n      <workItem from=\"1670738671890\" duration=\"600000\" />\r\n      <workItem from=\"1670739624597\" duration=\"122000\" />\r\n      <workItem from=\"1670922548173\" duration=\"109000\" />\r\n      <workItem from=\"1671156459951\" duration=\"611000\" />\r\n      <workItem from=\"1671341301954\" duration=\"239000\" />\r\n      <workItem from=\"1671541355997\" duration=\"1163000\" />\r\n      <workItem from=\"1673357251405\" duration=\"706000\" />\r\n      <workItem from=\"1673437363947\" duration=\"5024000\" />\r\n      <workItem from=\"1673515798675\" duration=\"5255000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00018\" summary=\"inform commit\">\r\n      <created>1666277581616</created>\r\n      <option name=\"number\" value=\"00018\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00018\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666277581616</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00019\" summary=\"changepassword interfaces modified commit\">\r\n      <created>1666347345312</created>\r\n      <option name=\"number\" value=\"00019\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00019\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666347345312</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00020\" summary=\"submitinform commit\">\r\n      <created>1666663571419</created>\r\n      <option name=\"number\" value=\"00020\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00020\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666663571419</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00021\" summary=\"submitinform commit\">\r\n      <created>1666664378288</created>\r\n      <option name=\"number\" value=\"00021\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00021\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666664378288</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00022\" summary=\"submitinform commit\">\r\n      <created>1666668244369</created>\r\n      <option name=\"number\" value=\"00022\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00022\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666668244369</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00023\" summary=\"entities update commit\">\r\n      <created>1666671055691</created>\r\n      <option name=\"number\" value=\"00023\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00023\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666671055691</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00024\" summary=\"entities update commit\">\r\n      <created>1666671133121</created>\r\n      <option name=\"number\" value=\"00024\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00024\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666671133121</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00025\" summary=\"add interfaces\">\r\n      <created>1666796091959</created>\r\n      <option name=\"number\" value=\"00025\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00025\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666796091959</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00026\" summary=\"add interfaces\">\r\n      <created>1666798325560</created>\r\n      <option name=\"number\" value=\"00026\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00026\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666798325560</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00027\" summary=\"add interfaces\">\r\n      <created>1666798448312</created>\r\n      <option name=\"number\" value=\"00027\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00027\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666798448312</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00028\" summary=\"merge commit\">\r\n      <created>1666800584678</created>\r\n      <option name=\"number\" value=\"00028\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00028\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666800584678</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00029\" summary=\"modify some interfaces commit\">\r\n      <created>1666832937815</created>\r\n      <option name=\"number\" value=\"00029\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00029\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666832937815</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00030\" summary=\"modify some interfaces commit\">\r\n      <created>1666833406014</created>\r\n      <option name=\"number\" value=\"00030\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00030\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666833406014</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00031\" summary=\"modify some interfaces commit\">\r\n      <created>1666845427435</created>\r\n      <option name=\"number\" value=\"00031\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00031\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666845427435</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00032\" summary=\"modify some interfaces commit\">\r\n      <created>1666877516631</created>\r\n      <option name=\"number\" value=\"00032\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00032\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666877516631</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00033\" summary=\"init commit\">\r\n      <created>1666881812285</created>\r\n      <option name=\"number\" value=\"00033\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00033\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1666881812285</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00034\" summary=\"1.0\">\r\n      <created>1667027605427</created>\r\n      <option name=\"number\" value=\"00034\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00034\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667027605427</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00035\" summary=\"merge test\">\r\n      <created>1667027757050</created>\r\n      <option name=\"number\" value=\"00035\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00035\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667027757050</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00036\" summary=\"merge test\">\r\n      <created>1667027832544</created>\r\n      <option name=\"number\" value=\"00036\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00036\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667027832544</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00037\" summary=\"merge test\">\r\n      <created>1667028107783</created>\r\n      <option name=\"number\" value=\"00037\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00037\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667028107783</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00038\" summary=\"merge test\">\r\n      <created>1667034694102</created>\r\n      <option name=\"number\" value=\"00038\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00038\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667034694102</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00039\" summary=\"ImageService Modify\">\r\n      <created>1667377545543</created>\r\n      <option name=\"number\" value=\"00039\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00039\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667377545543</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00040\" summary=\"ImageService Modify\">\r\n      <created>1667379726335</created>\r\n      <option name=\"number\" value=\"00040\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00040\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667379726335</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00041\" summary=\"ImageService Modify\">\r\n      <created>1667380593546</created>\r\n      <option name=\"number\" value=\"00041\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00041\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667380593546</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00042\" summary=\"Interfaces Modify\">\r\n      <created>1667393152764</created>\r\n      <option name=\"number\" value=\"00042\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00042\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667393152764</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00043\" summary=\"add interfaces\">\r\n      <created>1667407665944</created>\r\n      <option name=\"number\" value=\"00043\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00043\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667407665944</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00044\" summary=\"add search interface and impl\">\r\n      <created>1667477534531</created>\r\n      <option name=\"number\" value=\"00044\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00044\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667477534531</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00045\" summary=\"modify search interface and impl\">\r\n      <created>1667480342097</created>\r\n      <option name=\"number\" value=\"00045\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00045\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667480342097</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00046\" summary=\"add remark interface and impl\">\r\n      <created>1667488436164</created>\r\n      <option name=\"number\" value=\"00046\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00046\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667488436164</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00047\" summary=\"modify remark impl\">\r\n      <created>1667492750966</created>\r\n      <option name=\"number\" value=\"00047\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00047\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667492750966</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00048\" summary=\"modify remark impl\">\r\n      <created>1667533007656</created>\r\n      <option name=\"number\" value=\"00048\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00048\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667533007656</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00049\" summary=\"modify remark impl\">\r\n      <created>1667542586980</created>\r\n      <option name=\"number\" value=\"00049\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00049\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667542586980</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00050\" summary=\"modify image impl\">\r\n      <created>1667552487948</created>\r\n      <option name=\"number\" value=\"00050\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00050\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667552487948</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00051\" summary=\"modify image impl\">\r\n      <created>1667552732196</created>\r\n      <option name=\"number\" value=\"00051\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00051\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667552732196</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00052\" summary=\"modify image impl\">\r\n      <created>1667554076602</created>\r\n      <option name=\"number\" value=\"00052\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00052\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667554076602</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00053\" summary=\"modify image impl\">\r\n      <created>1667555464568</created>\r\n      <option name=\"number\" value=\"00053\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00053\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667555464568</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00054\" summary=\"modify remark impl\">\r\n      <created>1667557245903</created>\r\n      <option name=\"number\" value=\"00054\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00054\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667557245903</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00055\" summary=\"modify remark impl\">\r\n      <created>1667559831053</created>\r\n      <option name=\"number\" value=\"00055\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00055\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667559831053</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00056\" summary=\"modify methods name\">\r\n      <created>1667641463143</created>\r\n      <option name=\"number\" value=\"00056\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00056\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667641463144</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00057\" summary=\"modify methods name\">\r\n      <created>1667652230009</created>\r\n      <option name=\"number\" value=\"00057\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00057\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667652230010</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00058\" summary=\"modify methods name\">\r\n      <created>1667655325973</created>\r\n      <option name=\"number\" value=\"00058\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00058\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667655325973</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00059\" summary=\"modify methods name\">\r\n      <created>1667723542308</created>\r\n      <option name=\"number\" value=\"00059\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00059\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667723542309</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00060\" summary=\"update datasource config\">\r\n      <created>1667730414369</created>\r\n      <option name=\"number\" value=\"00060\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00060\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667730414369</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00061\" summary=\"update datasource config\">\r\n      <created>1667744039633</created>\r\n      <option name=\"number\" value=\"00061\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00061\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667744039633</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00062\" summary=\"update datasource config\">\r\n      <created>1667990475104</created>\r\n      <option name=\"number\" value=\"00062\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00062\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1667990475104</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00063\" summary=\"update datasource config\">\r\n      <created>1668600290899</created>\r\n      <option name=\"number\" value=\"00063\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00063\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1668600290900</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00064\" summary=\"update datasource config\">\r\n      <created>1668614335293</created>\r\n      <option name=\"number\" value=\"00064\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00064\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1668614335293</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00065\" summary=\"update datasource config\">\r\n      <created>1668671109306</created>\r\n      <option name=\"number\" value=\"00065\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00065\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1668671109307</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00066\" summary=\"update datasource config\">\r\n      <created>1668671197793</created>\r\n      <option name=\"number\" value=\"00066\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00066\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1668671197793</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"67\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State>\r\n              <option name=\"FILTERS\">\r\n                <map>\r\n                  <entry key=\"branch\">\r\n                    <value>\r\n                      <list>\r\n                        <option value=\"origin/main\" />\r\n                      </list>\r\n                    </value>\r\n                  </entry>\r\n                </map>\r\n              </option>\r\n            </State>\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <option name=\"ADD_EXTERNAL_FILES_SILENTLY\" value=\"true\" />\r\n    <MESSAGE value=\"changePassword second Commit\" />\r\n    <MESSAGE value=\"changePassword third Commit\" />\r\n    <MESSAGE value=\"changePassword fourth Commit\" />\r\n    <MESSAGE value=\"changePassword fifth Commit\" />\r\n    <MESSAGE value=\"changePassword seventh Commit\" />\r\n    <MESSAGE value=\"inform commit\" />\r\n    <MESSAGE value=\"changepassword interfaces modified commit\" />\r\n    <MESSAGE value=\"submitinform commit\" />\r\n    <MESSAGE value=\"entities update commit\" />\r\n    <MESSAGE value=\"merge commit\" />\r\n    <MESSAGE value=\"modify some interfaces commit\" />\r\n    <MESSAGE value=\"init commit\" />\r\n    <MESSAGE value=\"1.0\" />\r\n    <MESSAGE value=\"merge test\" />\r\n    <MESSAGE value=\"ImageService Modify\" />\r\n    <MESSAGE value=\"Interfaces Modify\" />\r\n    <MESSAGE value=\"add interfaces\" />\r\n    <MESSAGE value=\"add search interface and impl\" />\r\n    <MESSAGE value=\"modify search interface and impl\" />\r\n    <MESSAGE value=\"add remark interface and impl\" />\r\n    <MESSAGE value=\"modify remark interface and impl\" />\r\n    <MESSAGE value=\"modify image impl\" />\r\n    <MESSAGE value=\"modify remark impl\" />\r\n    <MESSAGE value=\"modify methods name\" />\r\n    <MESSAGE value=\"update datasource config\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"update datasource config\" />\r\n    <option name=\"OPTIMIZE_IMPORTS_BEFORE_PROJECT_COMMIT\" value=\"true\" />\r\n  </component>\r\n  <component name=\"XDebuggerManager\">\r\n    <breakpoint-manager>\r\n      <breakpoints>\r\n        <line-breakpoint enabled=\"true\" type=\"java-line\">\r\n          <url>file://$PROJECT_DIR$/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/GeneralServiceImpl.java</url>\r\n          <line>123</line>\r\n          <option name=\"timeStamp\" value=\"1\" />\r\n        </line-breakpoint>\r\n      </breakpoints>\r\n    </breakpoint-manager>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 1c354b6f30343467bc362ae52b3a2be032a6473b)
+++ b/.idea/workspace.xml	(date 1674229508342)
@@ -10,7 +10,12 @@
   </component>
   <component name="ChangeListManager">
     <list default="true" id="0ed0114c-f04d-44b0-987e-76d972b44c0b" name="Changes" comment="">
+      <change beforePath="$PROJECT_DIR$/.idea/libraries/Maven__org_apiguardian_apiguardian_api_1_1_2.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/libraries/Maven__org_apiguardian_apiguardian_api_1_0_0.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/ActivityServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/ActivityServiceImpl.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/RemarkLikeServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/RemarkLikeServiceImpl.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/TopicLikeServiceImpl.java" beforeDir="false" afterPath="$PROJECT_DIR$/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/TopicLikeServiceImpl.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/CoHelp/Server/src/test/java/com/cohelp/server/SensitiveWordTest.java" beforeDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -43,7 +48,7 @@
     </favorite-branches>
     <option name="RECENT_BRANCH_BY_REPOSITORY">
       <map>
-        <entry key="$PROJECT_DIR$" value="zgy" />
+        <entry key="$PROJECT_DIR$" value="main" />
       </map>
     </option>
     <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
@@ -96,6 +101,7 @@
   </component>
   <component name="RecentsManager">
     <key name="CopyFile.RECENT_KEYS">
+      <recent name="D:\maven_workspace\Co-Help\CoHelp\Server\src\main\resources" />
       <recent name="D:\java_workspace\Co-Help\CoHelp\Server\src\main\resources" />
     </key>
     <key name="MoveClassesOrPackagesDialog.RECENTS_KEY">
@@ -340,6 +346,9 @@
       <workItem from="1673357251405" duration="706000" />
       <workItem from="1673437363947" duration="5024000" />
       <workItem from="1673515798675" duration="5255000" />
+      <workItem from="1673681360566" duration="180000" />
+      <workItem from="1673873591362" duration="2920000" />
+      <workItem from="1674220247392" duration="1213000" />
     </task>
     <task id="LOCAL-00018" summary="inform commit">
       <created>1666277581616</created>
@@ -751,6 +760,11 @@
           <url>file://$PROJECT_DIR$/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/GeneralServiceImpl.java</url>
           <line>123</line>
           <option name="timeStamp" value="1" />
+        </line-breakpoint>
+        <line-breakpoint enabled="true" type="java-line">
+          <url>file://$PROJECT_DIR$/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/RemarkLikeServiceImpl.java</url>
+          <line>75</line>
+          <option name="timeStamp" value="3" />
         </line-breakpoint>
       </breakpoints>
     </breakpoint-manager>
Index: CoHelp/Server/src/main/java/com/cohelp/server/service/impl/TopicLikeServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.cohelp.server.service.impl;\r\n\r\nimport com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;\r\nimport com.baomidou.mybatisplus.core.conditions.update.UpdateWrapper;\r\nimport com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;\r\nimport com.cohelp.server.constant.TypeEnum;\r\nimport com.cohelp.server.model.domain.Result;\r\nimport com.cohelp.server.model.entity.TopicLike;\r\nimport com.cohelp.server.model.entity.Activity;\r\nimport com.cohelp.server.model.entity.Help;\r\nimport com.cohelp.server.model.entity.Hole;\r\nimport com.cohelp.server.model.entity.User;\r\nimport com.cohelp.server.service.ActivityService;\r\nimport com.cohelp.server.service.HelpService;\r\nimport com.cohelp.server.service.HoleService;\r\nimport com.cohelp.server.service.TopicLikeService;\r\nimport com.cohelp.server.mapper.TopicLikeMapper;\r\nimport com.cohelp.server.utils.ResultUtil;\r\nimport com.cohelp.server.utils.UserHolder;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport javax.annotation.Resource;\r\n\r\nimport static com.cohelp.server.constant.StatusCode.*;\r\n\r\n/**\r\n* @author jianping5\r\n* @description 针对表【topic_like(点赞记录表)】的数据库操作Service实现\r\n* @createDate 2022-11-02 17:12:25\r\n*/\r\n@Service\r\npublic class TopicLikeServiceImpl extends ServiceImpl<TopicLikeMapper, TopicLike>\r\n    implements TopicLikeService{\r\n\r\n    @Resource\r\n    private ActivityService activityService;\r\n\r\n    @Resource\r\n    private HelpService helpService;\r\n\r\n    @Resource\r\n    private HoleService holeService;\r\n\r\n    @Resource\r\n    private TopicLikeService topicLikeService;\r\n\r\n    @Override\r\n    public Result likeTopic(Integer type, Integer id) {\r\n        User loginUser = UserHolder.getUser();\r\n\r\n        if (TypeEnum.isActivity(type)) {\r\n            Activity activity = (Activity) getTopicById(type, id);\r\n\r\n            // 获取当前用户对该主题的点赞记录\r\n            if (loginUser == null) {\r\n                return ResultUtil.fail(INTERCEPTOR_LOGIN, \"未登录\");\r\n            }\r\n            Integer loginUserId = loginUser.getId();\r\n            QueryWrapper<TopicLike> likeQueryWrapper = new QueryWrapper<>();\r\n            likeQueryWrapper.eq(\"user_id\", loginUserId);\r\n            likeQueryWrapper.eq(\"topic_id\", activity.getId());\r\n            likeQueryWrapper.eq(\"topic_type\", TypeEnum.ACTIVITY.ordinal());\r\n            TopicLike like = topicLikeService.getOne(likeQueryWrapper);\r\n            // 之前未点赞且无记录\r\n            if (like == null) {\r\n                TopicLike newLike = new TopicLike();\r\n                newLike.setUserId(loginUserId);\r\n                newLike.setTopicId(id);\r\n                newLike.setTopicType(TypeEnum.ACTIVITY.ordinal());\r\n                newLike.setIsLiked(1);\r\n                boolean saveResult = topicLikeService.save(newLike);\r\n                if (!saveResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                activity.setActivityLike(activity.getActivityLike() + 1);\r\n                boolean updateResult = activityService.updateById(activity);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n\r\n            // 更新条件（对应主题对应用户id）\r\n            UpdateWrapper<TopicLike> likeUpdateWrapper = new UpdateWrapper<>();\r\n            likeUpdateWrapper.eq(\"user_id\", loginUserId);\r\n            likeUpdateWrapper.eq(\"topic_id\", activity.getId());\r\n            likeQueryWrapper.eq(\"topic_type\", TypeEnum.ACTIVITY.ordinal());\r\n\r\n            // 之前未点赞（但有记录）\r\n            if (like.getIsLiked() == 0) {\r\n                likeUpdateWrapper.set(\"is_liked\", 1);\r\n                boolean updateResult1 = topicLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult1) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                activity.setActivityLike(activity.getActivityLike() + 1);\r\n                boolean updateResult = activityService.updateById(activity);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n\r\n            // 之前已点赞\r\n            if (like.getIsLiked() == 1) {\r\n                likeUpdateWrapper.set(\"is_liked\", 0);\r\n                boolean updateResult2 = topicLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult2) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                // 减少对应主题的点赞量到\r\n                activity.setActivityLike(activity.getActivityLike() - 1);\r\n                boolean updateResult = activityService.updateById(activity);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"取消点赞成功\");\r\n            }\r\n        } else if (TypeEnum.isHelp(type)) {\r\n            Help help = (Help) getTopicById(type, id);\r\n\r\n            // 获取当前用户对该主题的点赞记录\r\n            if (loginUser == null) {\r\n                return ResultUtil.fail(INTERCEPTOR_LOGIN, \"未登录\");\r\n            }\r\n            Integer loginUserId = loginUser.getId();\r\n            QueryWrapper<TopicLike> likeQueryWrapper = new QueryWrapper<>();\r\n            likeQueryWrapper.eq(\"user_id\", loginUserId);\r\n            likeQueryWrapper.eq(\"topic_id\", help.getId());\r\n            likeQueryWrapper.eq(\"topic_type\", TypeEnum.HELP.ordinal());\r\n            TopicLike like = topicLikeService.getOne(likeQueryWrapper);\r\n            // 之前未点赞且无记录\r\n            if (like == null) {\r\n                TopicLike newLike = new TopicLike();\r\n                newLike.setUserId(loginUserId);\r\n                newLike.setTopicId(id);\r\n                newLike.setTopicType(TypeEnum.HELP.ordinal());\r\n                newLike.setIsLiked(1);\r\n                boolean saveResult = topicLikeService.save(newLike);\r\n                if (!saveResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                help.setHelpLike(help.getHelpLike() + 1);\r\n                boolean updateResult = helpService.updateById(help);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n\r\n            // 更新条件（对应主题对应用户id）\r\n            UpdateWrapper<TopicLike> likeUpdateWrapper = new UpdateWrapper<>();\r\n            likeUpdateWrapper.eq(\"user_id\", loginUserId);\r\n            likeUpdateWrapper.eq(\"topic_id\", help.getId());\r\n            likeQueryWrapper.eq(\"topic_type\", TypeEnum.HELP.ordinal());\r\n\r\n            // 之前未点赞（但有记录）\r\n            if (like.getIsLiked() == 0) {\r\n                likeUpdateWrapper.set(\"is_liked\", 1);\r\n                boolean updateResult1 = topicLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult1) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                help.setHelpLike(help.getHelpLike() + 1);\r\n                boolean updateResult = helpService.updateById(help);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n\r\n            // 之前已点赞\r\n            if (like.getIsLiked() == 1) {\r\n                likeUpdateWrapper.set(\"is_liked\", 0);\r\n                boolean updateResult2 = topicLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult2) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                // 减少对应主题的点赞量到\r\n                help.setHelpLike(help.getHelpLike() - 1);\r\n                boolean updateResult = helpService.updateById(help);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"取消点赞成功\");\r\n            }\r\n        } else {\r\n            Hole hole = (Hole) getTopicById(type, id);\r\n\r\n            // 获取当前用户对该主题的点赞记录\r\n            if (loginUser == null) {\r\n                return ResultUtil.fail(INTERCEPTOR_LOGIN, \"未登录\");\r\n            }\r\n            Integer loginUserId = loginUser.getId();\r\n            QueryWrapper<TopicLike> likeQueryWrapper = new QueryWrapper<>();\r\n            likeQueryWrapper.eq(\"user_id\", loginUserId);\r\n            likeQueryWrapper.eq(\"topic_id\", hole.getId());\r\n            likeQueryWrapper.eq(\"topic_type\", TypeEnum.HOLE.ordinal());\r\n            TopicLike like = topicLikeService.getOne(likeQueryWrapper);\r\n            // 之前未点赞且无记录\r\n            if (like == null) {\r\n                TopicLike newLike = new TopicLike();\r\n                newLike.setUserId(loginUserId);\r\n                newLike.setTopicId(id);\r\n                newLike.setTopicType(TypeEnum.HOLE.ordinal());\r\n                newLike.setIsLiked(1);\r\n                boolean saveResult = topicLikeService.save(newLike);\r\n                if (!saveResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                hole.setHoleLike(hole.getHoleLike() + 1);\r\n                boolean updateResult = holeService.updateById(hole);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n\r\n            // 更新条件（对应主题对应用户id）\r\n            UpdateWrapper<TopicLike> likeUpdateWrapper = new UpdateWrapper<>();\r\n            likeUpdateWrapper.eq(\"user_id\", loginUserId);\r\n            likeUpdateWrapper.eq(\"topic_id\", hole.getId());\r\n            likeQueryWrapper.eq(\"topic_type\", TypeEnum.HOLE.ordinal());\r\n\r\n            // 之前未点赞（但有记录）\r\n            if (like.getIsLiked() == 0) {\r\n                likeUpdateWrapper.set(\"is_liked\", 1);\r\n                boolean updateResult1 = topicLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult1) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                // 增加对应主题的点赞量到\r\n                hole.setHoleLike(hole.getHoleLike() + 1);\r\n                boolean updateResult = holeService.updateById(hole);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"点赞成功\");\r\n            }\r\n\r\n            // 之前已点赞\r\n            if (like.getIsLiked() == 1) {\r\n                likeUpdateWrapper.set(\"is_liked\", 0);\r\n                boolean updateResult2 = topicLikeService.update(likeUpdateWrapper);\r\n                if (!updateResult2) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                // 减少对应主题的点赞量到\r\n                hole.setHoleLike(hole.getHoleLike() - 1);\r\n                boolean updateResult = holeService.updateById(hole);\r\n                if (!updateResult) {\r\n                    return ResultUtil.fail(ERROR_SYSTEM, \"取消点赞失败\");\r\n                }\r\n                return ResultUtil.ok(true, \"取消点赞成功\");\r\n            }\r\n        }\r\n        return ResultUtil.ok(false, \"操作失败\");\r\n    }\r\n\r\n    /**\r\n     * 根据id查询对应主题\r\n     * @param id\r\n     * @return\r\n     */\r\n    private Object getTopicById(Integer type, Integer id) {\r\n        if (type == null || type <= 0 || id == null || id <= 0) {\r\n            return ResultUtil.fail(ERROR_PARAMS);\r\n        }\r\n        Object topic;\r\n        if (TypeEnum.isActivity(type)) {\r\n            topic = activityService.getById(id);\r\n        } else if (TypeEnum.isHelp(type)) {\r\n            topic = helpService.getById(id);\r\n        } else {\r\n            topic = holeService.getById(id);\r\n        }\r\n\r\n        if (topic == null) {\r\n            return ResultUtil.fail(ERROR_PARAMS, \"主题不存在\");\r\n        }\r\n        return topic;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/TopicLikeServiceImpl.java b/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/TopicLikeServiceImpl.java
--- a/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/TopicLikeServiceImpl.java	(revision 1c354b6f30343467bc362ae52b3a2be032a6473b)
+++ b/CoHelp/Server/src/main/java/com/cohelp/server/service/impl/TopicLikeServiceImpl.java	(date 1673875250380)
@@ -85,7 +85,7 @@
             UpdateWrapper<TopicLike> likeUpdateWrapper = new UpdateWrapper<>();
             likeUpdateWrapper.eq("user_id", loginUserId);
             likeUpdateWrapper.eq("topic_id", activity.getId());
-            likeQueryWrapper.eq("topic_type", TypeEnum.ACTIVITY.ordinal());
+            likeUpdateWrapper.eq("topic_type", TypeEnum.ACTIVITY.ordinal());
 
             // 之前未点赞（但有记录）
             if (like.getIsLiked() == 0) {
@@ -155,7 +155,7 @@
             UpdateWrapper<TopicLike> likeUpdateWrapper = new UpdateWrapper<>();
             likeUpdateWrapper.eq("user_id", loginUserId);
             likeUpdateWrapper.eq("topic_id", help.getId());
-            likeQueryWrapper.eq("topic_type", TypeEnum.HELP.ordinal());
+            likeUpdateWrapper.eq("topic_type", TypeEnum.HELP.ordinal());
 
             // 之前未点赞（但有记录）
             if (like.getIsLiked() == 0) {
@@ -225,7 +225,7 @@
             UpdateWrapper<TopicLike> likeUpdateWrapper = new UpdateWrapper<>();
             likeUpdateWrapper.eq("user_id", loginUserId);
             likeUpdateWrapper.eq("topic_id", hole.getId());
-            likeQueryWrapper.eq("topic_type", TypeEnum.HOLE.ordinal());
+            likeUpdateWrapper.eq("topic_type", TypeEnum.HOLE.ordinal());
 
             // 之前未点赞（但有记录）
             if (like.getIsLiked() == 0) {
